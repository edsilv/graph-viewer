<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Force Layout Example 1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        html, body {
            width: 100%;
            height: 100%;
        }
        .node {
            fill: #ccc;
            stroke: #fff;
            stroke-width: 2px;
        }
        .link {
            stroke: #777;
            stroke-width: 2px;
        }
    </style>
</head>
<body>
<script src='http://d3js.org/d3.v3.min.js'></script>
<script src='bower_components/lodash/lodash.js'></script>
<script>
    var width = window.innerWidth,
            height = window.innerHeight;

    var graph = {
        "creativeWork": [
            { id: "Wunschendorf" },
            { id: "AndOnlyFineThreads" },
            { id: "TheShore" },
            { id: "ScholtzsHouse" },
            { id: "LaMortedlarbe" },
            { id: "TheArtofNarrative" }
        ],
        "subject": [
            { id: "Memory" },
            { id: "Identity" },
            { id: "Mining" },
            { id: "Exile" },
            { id: "Storytelling" }
        ],
        "type": [
            { id: "MovingImage" },
            { id: "Text" }
        ],
        "creativeWorkSubject": [
            { "source": 0, "target": 6 },
            { "source": 0, "target": 9 },
            { "source": 1, "target": 6 },
            { "source": 2, "target": 7 },
            { "source": 3, "target": 7 },
            { "source": 3, "target": 9 },
            { "source": 4, "target": 7 },
            { "source": 4, "target": 8 },
            { "source": 5, "target": 10 }
        ],
        "creativeWorkType": [
            { "source": 0, "target": 0 },
            { "source": 1, "target": 1 },
            { "source": 2, "target": 0 },
            { "source": 3, "target": 0 },
            { "source": 4, "target": 0 },
            { "source": 5, "target": 1 }
        ]
    };

    var nodes = graph.creativeWork.concat(graph.subject);
    var links = graph.creativeWorkSubject;

    var svg = d3.select('body').append('svg')
            .attr('width', width)
            .attr('height', height);

    var force = d3.layout.force()
            .size([width, height])
            .nodes(nodes)
            .links(links);

    force.linkDistance(500);
    force.gravity(0.08);
    force.linkStrength(0);
    force.charge(-500);
    //force.friction(0.01);

    var link = svg.selectAll('.link')
            .data(links)
            .enter()
            .append('line')
            .attr('class', 'link')
            .attr('x1', function(d) { return nodes[d.source].x; })
            .attr('y1', function(d) { return nodes[d.source].y; })
            .attr('x2', function(d) { return nodes[d.target].x; })
            .attr('y2', function(d) { return nodes[d.target].y; });

    var node = svg.selectAll('.node')
            .data(nodes)
            .enter()
            .append('circle')
            .attr('class', 'node')
            .attr('r', 10)
            .attr('cx', function(d) { return d.x; })
            .attr('cy', function(d) { return d.y; });

    var animationStep = 400;

    force.on('tick', function() {
        node.transition().ease('linear').duration(animationStep)
                .attr('cx', function(d) { return d.x; })
                .attr('cy', function(d) { return d.y; });
        link.transition().ease('linear').duration(animationStep)
                .attr('x1', function(d) { return d.source.x; })
                .attr('y1', function(d) { return d.source.y; })
                .attr('x2', function(d) { return d.target.x; })
                .attr('y2', function(d) { return d.target.y; });
        // We only show one tick at a time, so stop the layout
        // for now.
        force.stop();
        // If we're animating the layout, continue after
        // a delay to allow the animation to take effect.
        setTimeout(
                function() { force.start(); },
                animationStep
        );
    });

    force.start();
</script>
</body>
</html>